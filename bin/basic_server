#!/usr/bin/env node

var config = require('../config/basic_server');
var Happner = require('happner');

Happner.create(config).then(
  function(mesh) {
    setTimeout(function() {

mesh.stop({
  kill: false,    // kill the process once stopped
  wait: 10000,    // wait for callbacks before kill
  exitCode: 1,    // when kill exist with this integer
  reconnect: true // inform attached clients/endpoints to reconnect
}, function(data) {
  console.log('stopped');
});


    }, 5000);
  },
  function(err) {
    console.error(err.stack);
    process.exit(1);
  }
)

// Also start another

// Happner.create().then(
//   function(mesh) {},
//   function(err) {
//     console.error(err.stack);
//     process.exit(1);
//   }
// )